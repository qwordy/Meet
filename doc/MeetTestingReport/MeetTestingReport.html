<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meet测试报告</title>
<link rel="stylesheet" href="base.css" />
</head>
<body><div class="container" style="width:600px"><h1 id="meet测试报告">Meet测试报告</h1>

<p><div class="toc">
<ul>
<li><a href="#meet测试报告">Meet测试报告</a><ul>
<li><a href="#1-概述">1. 概述</a><ul>
<li><a href="#11-目标">1.1. 目标</a></li>
<li><a href="#12-测试对象">1.2. 测试对象</a></li>
<li><a href="#13-测试环境">1.3. 测试环境</a><ul>
<li><a href="#131-个人电脑">1.3.1. 个人电脑</a></li>
<li><a href="#132-安卓设备">1.3.2. 安卓设备</a></li>
</ul>
</li>
<li><a href="#14-文章信息">1.4. 文章信息</a></li>
</ul>
</li>
<li><a href="#2-功能测试">2. 功能测试</a><ul>
<li><a href="#21-测试方法">2.1 测试方法</a></li>
<li><a href="#22-测试结果">2.2 测试结果</a></li>
</ul>
</li>
<li><a href="#3-ui测试">3. UI测试</a><ul>
<li><a href="#31-测试工具">3.1. 测试工具</a><ul>
<li><a href="#311-androidjunit">3.1.1. AndroidJunit</a></li>
<li><a href="#312-espresso">3.1.2. Espresso</a></li>
</ul>
</li>
<li><a href="#32-测试方法">3.2. 测试方法</a></li>
<li><a href="#33-测试结果">3.3. 测试结果</a></li>
</ul>
</li>
<li><a href="#4-模糊测试">4. 模糊测试</a><ul>
<li><a href="#41-测试工具">4.1. 测试工具</a><ul>
<li><a href="#411-monkey">4.1.1. Monkey</a></li>
</ul>
</li>
<li><a href="#42-测试方法">4.2. 测试方法</a></li>
<li><a href="#43-测试结果">4.3. 测试结果</a></li>
</ul>
</li>
<li><a href="#5-性能测试">5. 性能测试</a><ul>
<li><a href="#51-测试工具">5.1. 测试工具</a><ul>
<li><a href="#511-dumpsys">5.1.1. dumpsys</a></li>
</ul>
</li>
<li><a href="#52-测试方法">5.2. 测试方法</a></li>
<li><a href="#53-测试结果">5.3. 测试结果</a><ul>
<li><a href="#531-图形绘制信息快照">5.3.1. 图形绘制信息快照</a></li>
<li><a href="#532-内存信息快照">5.3.2. 内存信息快照</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-兼容性测试">6. 兼容性测试</a><ul>
<li><a href="#61-测试方法">6.1. 测试方法</a></li>
<li><a href="#62-测试结果">6.2. 测试结果</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</p>



<h2 id="1-概述">1. 概述</h2>



<h3 id="11-目标">1.1. 目标</h3>

<p>通过系统化的测试方法尽可能地发现软件错误，提高软件质量。</p>



<h3 id="12-测试对象">1.2. 测试对象</h3>

<p>Meet应用</p>



<h3 id="13-测试环境">1.3. 测试环境</h3>



<h4 id="131-个人电脑">1.3.1. 个人电脑</h4>

<p>Ubuntu 14.04.1</p>



<h4 id="132-安卓设备">1.3.2. 安卓设备</h4>

<p>品牌：华为 <br>
型号：H30-U10 <br>
CPU：Quad core 1.3 GHz <br>
RAM：2.0GB <br>
分辨率：720 * 1280 <br>
安卓版本：4.2.2 <br>
内核版本：3.4.5</p>



<h3 id="14-文章信息">1.4. 文章信息</h3>

<p>作者：yfy <br>
版本号：1 <br>
更新时间：2015.12.10</p>



<h2 id="2-功能测试">2. 功能测试</h2>



<h3 id="21-测试方法">2.1 测试方法</h3>

<p>列出需要测试的功能点，人工测试该功能是否正常。</p>



<h3 id="22-测试结果">2.2 测试结果</h3>

<p>功能点：</p>

<ul>
<li>聊天 <br>
<ul><li>查看附近人群</li>
<li>选中目标，蓝牙配对</li>
<li>发送接收文字和表情</li></ul></li>
<li>系统设置 <br>
<ul><li>设置显示名称</li>
<li>设置震动提示</li>
<li>设置音效提示</li></ul></li>
<li>个人资料 <br>
<ul><li>设置昵称</li>
<li>设置姓名和可见度</li>
<li>设置性别和可见度</li>
<li>设置生日和可见度</li>
<li>设置籍贯和可见度</li>
<li>设置居住地和可见度</li>
<li>设置标签和可见度</li>
<li>设置联系方式和可见度</li>
<li>设置教育背景和可见度</li>
<li>设置兴趣爱好和可见度</li></ul></li>
<li>我的需求 <br>
<ul><li>查看我的需求</li>
<li>新建我的需求</li></ul></li>
<li>用户行为分析 <br>
<ul><li>侧滑导航栏功能</li>
<li>查看手机使用时间分布</li>
<li>查看安装的应用 <br>
<ul><li>所有应用</li>
<li>第三方应用</li></ul></li>
<li>查看关于</li></ul></li>
<li>退出</li>
</ul>

<p>测试显示在合适的条件下，以上功能正常。</p>

<h2 id="3-ui测试">3. UI测试</h2>



<h3 id="31-测试工具">3.1. 测试工具</h3>



<h4 id="311-androidjunit">3.1.1. AndroidJunit</h4>

<p>JUnit 4-compatible test runner for Android. It allows you to create and run instrumented unit tests.</p>

<p><img src="testType.png" alt="" title=""></p>



<h4 id="312-espresso">3.1.2. Espresso</h4>

<p>UI testing framework; suitable for functional UI testing within an app.</p>



<h3 id="32-测试方法">3.2. 测试方法</h3>

<p>通过Espresso用代码实现用户输入，如打字，点击，滑动，使用AndroidJunit的API进行一些断言测试。例如：</p>



<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-comment">// Open drawer</span>
onView(withContentDescription(getString(R.string.navigation_drawer_open))).perform(click());</code></pre>

<p>通过view的描述获取该view，执行点击操作。这里功能是打开导航栏。</p>



<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-comment">// Swipe</span>
onView(withId(R.id.appListView)).perform(swipeUp());</code></pre>

<p>通过view的id获取该view，向上滑动。这里功能是对一个ListView向上滑屏幕，可以看到ListView下面的内容。</p>



<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-comment">// Check title ubma</span>
assertEquals(toolbar.getTitle(), getString(R.string.ubma_title));</code></pre>

<p>检查toolbar的标题是否正确。</p>



<h3 id="33-测试结果">3.3. 测试结果</h3>

<p>测试模拟用户正常操作，结果显示程序执行正常，所有断言通过，耗时17s54ms。附视频。</p>

<p>控制台输出：</p>

<pre><code>Testing started at 9:04 PM ...
Installing sjtu.se
DEVICE SHELL COMMAND: pm install -r "/data/local/tmp/sjtu.se"
pkg: /data/local/tmp/sjtu.se
Success


Uploading file
    local path: /home/yfy/AdvancedSE/meet/code/Meet/meet/build/outputs/apk/meet-debug-androidTest-unaligned.apk
    remote path: /data/local/tmp/sjtu.se.test
Installing sjtu.se.test
DEVICE SHELL COMMAND: pm install -r "/data/local/tmp/sjtu.se.test"
pkg: /data/local/tmp/sjtu.se.test
Success


Running tests
Test running startedFinish
</code></pre>



<h2 id="4-模糊测试">4. 模糊测试</h2>

<blockquote>
  <p>Fuzz testing or fuzzing is a software testing technique, often automated or semi-automated, that involves providing invalid, unexpected, or random data to the inputs of a computer program.</p>
</blockquote>



<h3 id="41-测试工具">4.1. 测试工具</h3>



<h4 id="411-monkey">4.1.1. Monkey</h4>

<blockquote>
  <p>The Monkey is a program that runs on your emulator or device and generates pseudo-random streams of user events such as clicks, touches, or gestures, as well as a number of system-level events. You can use the Monkey to stress-test applications that you are developing, in a random yet repeatable manner.</p>
</blockquote>



<h3 id="42-测试方法">4.2. 测试方法</h3>

<pre><code>./adb shell monkey -p sjtu.se -v 10000
</code></pre>

<p><code>-p</code>表示包名，仅在指定的包内进行测试。</p>

<p><code>-v</code>表示verbose，显示详细信息。</p>

<p><code>10000</code>表示执行10000个动作。</p>



<h3 id="43-测试结果">4.3. 测试结果</h3>

<p>输出内容很多，这里显示一部分内容</p>

<pre><code>:Sending Touch (ACTION_UP): 0:(112.7074,1115.5038)
:Sending Trackball (ACTION_MOVE): 0:(1.0,-4.0)
:Sending Touch (ACTION_DOWN): 0:(198.0,347.0)
    //[calendar_time:2015-12-10 17:10:27.192  system_uptime:2217926161]
    // Sending event #9900
:Sending Touch (ACTION_UP): 0:(109.5063,328.66043)
:Sending Touch (ACTION_DOWN): 0:(202.0,886.0)
:Sending Touch (ACTION_UP): 0:(211.18405,896.37)
    // Rejecting start of Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] cmp=com.huawei.android.launcher/.Launcher } in package com.huawei.android.launcher
:Sending Touch (ACTION_DOWN): 0:(275.0,652.0)
:Sending Touch (ACTION_UP): 0:(258.7679,601.2341)
:Switch: #Intent;action=android.intent.action.MAIN;category=android.intent.category.LAUNCHER;launchFlags=0x10200000;component=sjtu.se/.Activity.Search.Search;end
    // Allowing start of Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=sjtu.se/.Activity.Search.Search } in package sjtu.se
:Sending Touch (ACTION_DOWN): 0:(315.0,1267.0)
:Sending Touch (ACTION_UP): 0:(363.5855,1262.1498)
:Sending Touch (ACTION_DOWN): 0:(691.0,462.0)
:Sending Touch (ACTION_UP): 0:(693.4022,467.48196)
:Sending Touch (ACTION_DOWN): 0:(695.0,689.0)
:Sending Touch (ACTION_UP): 0:(691.6214,633.60834)
:Sending Touch (ACTION_DOWN): 0:(177.0,484.0)
:Sending Touch (ACTION_UP): 0:(174.77145,483.92554)
:Sending Trackball (ACTION_MOVE): 0:(4.0,-2.0)
:Sending Touch (ACTION_DOWN): 0:(470.0,57.0)
:Sending Touch (ACTION_UP): 0:(466.1036,62.241554)
:Sending Trackball (ACTION_MOVE): 0:(-4.0,-3.0)
:Sending Touch (ACTION_DOWN): 0:(342.0,692.0)
:Sending Touch (ACTION_UP): 0:(342.302,689.30194)
    // Rejecting start of Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] cmp=com.huawei.android.launcher/.Launcher } in package com.huawei.android.launcher
    // activityResuming(com.android.mms)
    // Rejecting resume of package com.android.mms
:Sending Trackball (ACTION_MOVE): 0:(1.0,3.0)
Events injected: 10000
:Sending rotation degree=0, persist=false
:Dropped: keys=6 pointers=26 trackballs=0 flips=0 rotations=0
## Network stats: elapsed time=37854ms (0ms mobile, 37854ms wifi, 0ms not connected)
// Monkey finished
</code></pre>



<h2 id="5-性能测试">5. 性能测试</h2>



<h3 id="51-测试工具">5.1. 测试工具</h3>



<h4 id="511-dumpsys">5.1.1. dumpsys</h4>

<blockquote>
  <p>dumpsys is an Android tool that runs on the device and dumps interesting information about the status of system services.</p>
</blockquote>



<h3 id="52-测试方法">5.2. 测试方法</h3>

<p>查看图形绘制信息：</p>

<pre><code>./adb shell dumpsys gfxinfo sjtu.se
</code></pre>

<p><code>gfxinfo</code>表示和图形绘制相关的信息。</p>

<p><code>sjtu.se</code>表示显示这个应用的信息。</p>

<p>在Intellij中，也可以查看系统状态，有一些可视化的工具。</p>



<h3 id="53-测试结果">5.3. 测试结果</h3>

<p>经数据分析和人工测试，本应用使用流畅，占用内存通常在10M到20M之间，可以接受。</p>



<h4 id="531-图形绘制信息快照">5.3.1. 图形绘制信息快照</h4>

<pre><code>Applications Graphics Acceleration Info:
Uptime: 972836010 Realtime: 2236530636

** Graphics info for pid 29401 [sjtu.se] **

Recent DisplayList operations
              DrawDisplayList
                Save
                ClipRect
                Translate
                DrawText
                RestoreToCount
              DrawDisplayList
                DrawRect
                Save
                ClipRect
                Translate
                DrawText
                RestoreToCount
              DrawDisplayList
                DrawRect
                Save
                ClipRect
                Translate
                DrawText
                RestoreToCount
          DrawPatch
    RestoreToCount
  DrawRect
  DrawDisplayList
    Save
    ClipRect
    DrawDisplayList
      DrawDisplayList
        DrawDisplayList
          DrawDisplayList
            DrawRect
            DrawDisplayList
            DrawDisplayList
            DrawDisplayList
          DrawPatch
    RestoreToCount
  DrawRect
  DrawDisplayList
    Save
    ClipRect
    DrawDisplayList
      DrawDisplayList
        DrawDisplayList
          DrawDisplayList
            DrawRect
            DrawDisplayList
            DrawDisplayList
            DrawDisplayList
          DrawPatch
    RestoreToCount

Caches:
Current memory usage / total memory usage (bytes):
  TextureCache             4096 / 25165824
  LayerCache                  0 / 16777216
  GradientCache               0 /   524288
  PathCache                   0 /  4194304
  CircleShapeCache            0 /  1048576
  OvalShapeCache              0 /  1048576
  RoundRectShapeCache         0 /  1048576
  RectShapeCache              0 /  1048576
  ArcShapeCache               0 /  1048576
  TextDropShadowCache         0 /  2097152
  FontRenderer 0         262144 /   262144
Other:
  FboCache                    0 /       16
  PatchCache                  1 /      512
Total memory usage:
  266240 bytes, 0.25 MB

Profile data in ms:

    sjtu.se/sjtu.se.Activity.Search.Search/android.view.ViewRootImpl@41847208
    Draw    Process Execute
    10.80   42.46   3.08
    3.65    0.63    2.00
    1.16    0.97    2.43
    1.10    0.22    0.71
    0.68    0.19    0.93
    0.64    0.22    0.61
    0.65    0.19    0.61
    0.64    0.17    0.56
    0.93    0.26    0.88
    0.85    0.25    0.90
    0.85    0.28    1.13
    0.83    0.27    0.87
    0.78    0.24    0.88
    1.00    0.29    0.88
    0.81    0.25    0.90
    0.87    0.26    0.91
    1.06    0.31    1.05
    0.78    0.25    0.84
    0.57    0.30    0.93
    2.53    0.25    3.67
    1.06    0.18    0.91
    1.34    0.26    1.46
    0.85    0.17    1.11
    1.46    1.04    2.04
    1.18    0.80    0.87
    0.77    0.18    1.70
    0.90    0.17    1.86

View hierarchy:

  sjtu.se/sjtu.se.Activity.Search.Search/android.view.ViewRootImpl@41847208
  19 views, 1.00 kB of display lists, 27 frames rendered


Total ViewRootImpl: 1
Total Views:        19
Total DisplayList:  1.00 kB
</code></pre>



<h4 id="532-内存信息快照">5.3.2. 内存信息快照</h4>

<pre><code>Applications Memory Usage (kB):
Uptime: 973197534 Realtime: 2236892160

** MEMINFO in pid 29401 [sjtu.se] **
                         Shared  Private     Heap     Heap     Heap
                   Pss    Dirty    Dirty     Size    Alloc     Free
                ------   ------   ------   ------   ------   ------
       Native        0        0        0     3372     3099      272
       Dalvik     3174     4660     2660    10732    10014      718
       Cursor        0        0        0                           
       Ashmem        0        0        0                           
    Other dev        4       56        0                           
     .so mmap     1333      372      940                           
    .jar mmap        0        0        0                           
    .apk mmap      197        0        0                           
    .ttf mmap      389        0        0                           
    .dex mmap     1256        0        8                           
   Other mmap      633      160      124                           
      Unknown     1837      116     1828                           
        TOTAL     8823     5364     5560    14104    13113      990

 Objects
               Views:       20         ViewRootImpl:        1
         AppContexts:        5           Activities:        1
              Assets:        4        AssetManagers:        4
       Local Binders:        9        Proxy Binders:       17
    Death Recipients:        0
     OpenSSL Sockets:        0

 SQL
         MEMORY_USED:        0
  PAGECACHE_OVERFLOW:        0          MALLOC_SIZE:        0
</code></pre>



<h2 id="6-兼容性测试">6. 兼容性测试</h2>



<h3 id="61-测试方法">6.1. 测试方法</h3>

<p>选取多台设备，人工进行测试。</p>



<h3 id="62-测试结果">6.2. 测试结果</h3>

<p>设备列表：</p>

<ul>
<li>华为荣誉3C 4.2.2</li>
<li>小米3 4.4.4</li>
<li>小米2 4.1.1</li>
<li>华硕平板 4.3</li>
</ul>

<p>测试显示以上设备可正常运行应用。更多机型有待测试。</p></div></body>
</html>
